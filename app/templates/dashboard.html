{% extends 'base.html' %}
{% block content %}
<h2>Product Dashboard</h2>

<!-- Product Form -->
<form method="POST" enctype="multipart/form-data" class="mb-4">
    {% csrf_token %}
    <div class="form-group">
        <label for="name">Product Name:</label>
        {{ form.name }}
    </div>
    <div class="form-group">
        <label for="quantity">Quantity:</label>
        {{ form.quantity }}
    </div>
    <div class="form-group">
        <label for="quality">Quality:</label>
        {{ form.quality }}
    </div>
    <div class="form-group">
        <label for="price">Price:</label>
        {{ form.price }}
    </div>
    <div class="form-group">
        <label for="expiry_date">Expiry Date:</label>
        {{ form.expiry_date }}
    </div>
    <div class="form-group">
        <label for="image">Product Image:</label>
        {{ form.image }}
    </div>
    <button type="submit" class="btn btn-success" name="add_product">Add Product</button>
</form>

<!-- Existing Products List -->
<h3>Existing Products</h3>
<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Quantity</th>
            <th>Quality</th>
            <th>Price</th>
            <th>Expiry Date</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{ product.name }}</td>
            <td>{{ product.quantity }}</td>
            <td>{{ product.quality }}</td>
            <td>{{ product.price }}</td>
            <td>{{ product.expiry_date }}</td>
            <td><img src="{{ product.image.url }}" alt="{{ product.name }}" width="50"></td>
            <td>
                <!-- Update Product Form -->
                <form method="POST" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <button type="submit" class="btn btn-primary" name="update_product">Update</button>
                </form>
                <!-- Delete Product Form -->
                <form method="POST" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">
                    <button type="submit" class="btn btn-danger" name="delete_product">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if messages %}
    {% for message in messages %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}
{% endif %}
{% endblock %}
