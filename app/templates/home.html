{% extends 'base.html' %}

{% block title %}Home - AnnadattaMitra{% endblock %}

{% block content %}
<section class="bg-gradient-to-br from-green-400 to-green-700 text-white py-32 px-7 text-center">
    <h1 class="text-4xl md:text-5xl font-bold leading-tight">Empower Farmers with AI-Driven Insights</h1>
    <p class="mt-2 text-lg md:text-xl">Real-time market trends, crop advice, and direct access to buyers.</p>
    <button class="mt-4 bg-yellow-400 text-green-800 px-5 py-2 text-lg font-bold rounded hover:bg-yellow-300">
        Explore Platform
    </button>
</section>

{% if user.is_authenticated %}
    <div class="text-center mt-4">
        <a href="{% url 'dashboard' %}" class="bg-green-700 text-white px-4 py-2 rounded">Go to Dashboard</a>
        <form method="POST" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="bg-red-700 text-white px-4 py-2 rounded">Logout</button>
        </form>
    </div>
{% else %}
    <div class="text-center mt-4">
        <a href="{% url 'login' %}" class="bg-blue-500 text-white px-4 py-2 rounded">Login</a>
        <a href="{% url 'register' %}" class="bg-green-500 text-white px-4 py-2 rounded">Register</a>
    </div>
{% endif %}

<h1 class="text-3xl font-bold text-center mt-6">Our Farmer Products</h1>
<div class="container mx-auto px-4 mt-4">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for product in products %}
            <div class="bg-white shadow-md rounded-lg overflow-hidden">
                <img class="w-full h-40 object-cover" src="{{ product.image.url }}" alt="{{ product.name }}" />
                <div class="p-4">
                    <div class="flex justify-between">
                        <div class="w-1/2 pr-2">
                            <h2 class="text-lg font-semibold text-green-800">{{ product.name }}</h2>
                            <p class="text-gray-700">Price: {{ product.price }} â‚¹</p>
                            {% if product.is_expired %}
                                <p class="text-red-500 font-semibold">(Expired)</p>
                            {% endif %}
                            <p class="text-gray-600">Quantity: {{ product.quantity }} units</p>
                            <p class="text-gray-600">Quality: {{ product.quality }}</p>
                            <p class="text-gray-600">Uplaod: {{ product.uploaded_at|date:"F j, Y" }}</p>
                            <p class="text-gray-600">Expiry: {{ product.expiry_date|date:"F j, Y" }}</p>
                        </div>
    
                        <div class="w-1/2 pl-2 border-l border-gray-300">
                            <h3 class="text-lg font-semibold">Farmer:</h3>
                            <p class="text-gray-600">Name: {{ product.farmer.name }}</p>
                            <p class="text-gray-600">State: {{ product.farmer.state }}</p>
                            <p class="text-gray-600">District: {{ product.farmer.district }}</p>
                            <p class="text-gray-600">City: {{ product.farmer.city }}</p>
                            <p class="text-gray-600">Phone: {{ product.farmer.phone }}</p>
                        </div>
                    </div>
                </div>
    
                <!-- WhatsApp Contact Button -->
                <div class="p-4">
                    <a href="https://wa.me/+91{{ product.farmer.phone }}?text=Hello%20{{ product.farmer.name }}!%20I%20am%20interested%20in%20your%20product%20{{ product.name }}." 
                       class="flex items-center justify-center bg-green-500 text-white px-4 py-2 rounded hover:bg-green-400" 
                       target="_blank">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="w-5 h-5 mr-2"> 
                        Send Message
                    </a>
                </div>
            </div>
        {% empty %}
            <p class="text-center text-gray-500">No available products at the moment.</p>
        {% endfor %}
    </div>          
</div>

<section id="about" class="py-12 px-8 text-center">
    <h2 class="text-3xl font-bold text-green-700 mb-4">About AnnadattaMitra</h2>
    <p class="text-lg mb-4">A modern solution for farmers, using AI to bridge the gap between agriculture, market, and technology.</p>
    <div class="grid md:grid-cols-3 gap-4">
        <div class="bg-white shadow-md p-4 rounded-lg">
            <h3 class="text-xl font-semibold text-green-800">AI-Powered Crop Advice</h3>
            <p class="mt-2 text-sm">Get personalized recommendations based on real-time weather and soil data.</p>
        </div>
        <div class="bg-white shadow-md p-4 rounded-lg">
            <h3 class="text-xl font-semibold text-green-800">Direct Market Access</h3>
            <p class="mt-2 text-sm">Sell directly to buyers with transparent pricing and logistics support.</p>
        </div>
        <div class="bg-white shadow-md p-4 rounded-lg">
            <h3 class="text-xl font-semibold text-green-800">Multilingual AI Chatbot</h3>
            <p class="mt-2 text-sm">Chat with LLaMA AI in your native language for quick insights.</p>
        </div>
    </div>
</section>
{% endblock %}
